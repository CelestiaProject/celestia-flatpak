app-id: space.celestia.celestia

runtime: org.kde.Platform
runtime-version: '6.4'
sdk: org.kde.Sdk

command: celestia-qt6

finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --device=dri
  - --filesystem=home

modules:
  - shared-modules/lua5.4/lua-5.4.json

  - name: eigen
    buildsystem: cmake
    builddir: true
    sources:
      - type: git
        url: https://gitlab.com/libeigen/eigen
        tag: 3.4.0
        commit: 3147391d946bb4b6c68edd901f2add6ac1f31f8c

  - name: celestia-data
    buildsystem: simple
    build-commands:
      - mkdir -p /app/share/celestia
      - cp -a data /app/share/celestia
    sources:
      - type: git
        url: https://github.com/CelestiaProject/Celestia
        tag: 1.6.3
        commit: e9a70d6a890a37c7f44a4a508f1ce626e188e104

  - name: celestia
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DENABLE_QT6=ON
      - -DENABLE_QT5=OFF
      - -DUSE_WAYLAND=ON
    sources:
      - type: git
        url: https://github.com/CelestiaProject/Celestia
